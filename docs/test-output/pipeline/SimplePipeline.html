<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Documentation for Simple Pipeline - A Harness Pipeline Template">
    <title>Simple Pipeline - Harness Template Documentation</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <button class="theme-toggle" id="theme-toggle" title="Toggle dark/light mode" aria-label="Toggle dark mode">
        <i class="fas fa-moon dark-icon" aria-hidden="true"></i>
        <i class="fas fa-sun light-icon" aria-hidden="true"></i>
    </button>

    <div class="sidebar" role="navigation" aria-label="Main navigation">
        <div class="sidebar-header">
            <h3><i class="fas fa-layer-group" aria-hidden="true"></i> Harness Templates</h3>
        </div>
        <div class="sidebar-menu">
            <a href="../index.html"><i class="fas fa-home" aria-hidden="true"></i> All Templates</a>
            <a href="../pipeline/" class="active" aria-current="page"><i class="fas fa-sitemap" aria-hidden="true"></i> Pipelines</a>
            <a href="../stage/"><i class="fas fa-cube" aria-hidden="true"></i> Stages</a>
            <a href="../stepgroup/"><i class="fas fa-cubes" aria-hidden="true"></i> Step Groups</a>
        </div>
    </div>
    
    <div class="content">
        <header>
            <div class="template-header">
                <h1>Simple Pipeline</h1>
                <span class="template-badge type-pipeline">pipeline</span>
            </div>
            <nav aria-label="Breadcrumb">
                <p class="breadcrumbs">
                    <a href="../index.html">Templates</a> <span>/</span> 
                    <a href="../pipeline/">Pipelines</a> <span>/</span> 
                    <span aria-current="page">Simple Pipeline</span>
                </p>
            </nav>
        </header>

        <main>
            <article class="template-section" data-type="pipeline">
                <div class="template-metadata">
                    <div class="metadata-item">
                        <span class="metadata-label">Version</span>
                        <span class="metadata-value">1.0.0</span>
                    </div>
                    <div class="metadata-item">
                        <span class="metadata-label">Author</span>
                        <span class="metadata-value">Harness</span>
                    </div>
                </div>
                
                <section class="template-description">
                    <h2>Description</h2>
                    <p>A basic CD pipeline template for Kubernetes deployments</p>
                </section>
                
                <section class="template-tags">
                    <h2>Tags</h2>
                    <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> cd</span>
                    <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> kubernetes</span>
                </section>
                
                <section class="template-parameters">
                    <h2>Parameters</h2>
                    <div class="table-responsive">
                        <table class="parameters-table">
                            <caption class="sr-only">Pipeline template parameters</caption>
                            <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Description</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Required</th>
                                    <th scope="col">Default</th>
                                    <th scope="col">Scope</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="param-name">serviceRef</td>
                                    <td>Reference to the service to deploy</td>
                                    <td><code>String</code></td>
                                    <td><span class="required">Yes</span></td>
                                    <td><code>-</code></td>
                                    <td>stage</td>
                                </tr>
                                <tr>
                                    <td class="param-name">namespace</td>
                                    <td>Kubernetes namespace to deploy to</td>
                                    <td><code>String</code></td>
                                    <td><span class="required">Yes</span></td>
                                    <td><code>-</code></td>
                                    <td>stage</td>
                                </tr>
                                <tr>
                                    <td class="param-name">releaseName</td>
                                    <td>Release name for the deployment</td>
                                    <td><code>String</code></td>
                                    <td><span class="required">Yes</span></td>
                                    <td><code>-</code></td>
                                    <td>stage</td>
                                </tr>
                                <tr>
                                    <td class="param-name">skipDryRun</td>
                                    <td>Skip dry run before deployment</td>
                                    <td><code>Boolean</code></td>
                                    <td>No</td>
                                    <td><code>false</code></td>
                                    <td>step</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <section class="template-variables">
                    <h2>Variables</h2>
                    <div class="table-responsive">
                        <table class="variables-table">
                            <caption class="sr-only">Pipeline template variables</caption>
                            <thead>
                                <tr>
                                    <th scope="col">Name</th>
                                    <th scope="col">Description</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Required</th>
                                    <th scope="col">Scope</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="var-name">IMAGE_TAG</td>
                                    <td>Docker image tag to deploy</td>
                                    <td><code>String</code></td>
                                    <td><span class="required">Yes</span></td>
                                    <td>stage</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <section class="template-code-section">
                    <h2>Template Code</h2>
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">
                                <i class="fas fa-file-code" aria-hidden="true"></i> simple-pipeline.yaml
                            </div>
                            <div class="code-actions">
                                <button class="code-action-btn" id="copy-btn" data-clipboard-target="#template-code" aria-label="Copy code">
                                    <i class="fas fa-copy" aria-hidden="true"></i> <span>Copy</span>
                                </button>
                                <button class="code-action-btn" id="download-btn" aria-label="Download code">
                                    <i class="fas fa-download" aria-hidden="true"></i> <span>Download</span>
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-yaml" id="template-code">template:
  name: Simple CD Pipeline
  type: Pipeline
  versionLabel: "1.0.0"
  tags:
    type: cd
    platform: kubernetes
  description: A basic CD pipeline template for Kubernetes deployments
  spec:
    stages:
      - stage:
          name: Deploy
          identifier: Deploy
          type: Deployment
          spec:
            serviceConfig:
              serviceRef: <+input>
              serviceDefinition:
                type: Kubernetes
                spec:
                  variables:
                    - name: IMAGE_TAG
                      type: String
                      description: "Docker image tag to deploy"
                      required: true
            infrastructure:
              environment:
                name: <+input>
              infrastructureDefinition:
                type: KubernetesDirect
                spec:
                  namespace: <+input>
                  releaseName: <+input>
            execution:
              steps:
                - step:
                    name: Deploy to Kubernetes
                    identifier: k8sDeploy
                    type: K8sApply
                    timeout: 10m
                    spec:
                      skipDryRun: false
                      skipSteadyStateCheck: false</code></pre>
                        </div>
                    </div>
                </section>
            </article>
        </main>
        
        <footer>
            <p>Generated on <span id="generation-date"></span> | <a href="https://harness.io" target="_blank" rel="noopener">Harness</a> Template Documentation</p>
        </footer>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/languages/yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <script>
        // Set generation date
        document.getElementById('generation-date').textContent = new Date().toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
        
        // Initialize syntax highlighting
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
        });
        
        // Copy to clipboard functionality
        const clipboard = new ClipboardJS('#copy-btn');
        
        clipboard.on('success', function(e) {
            const copyBtn = document.getElementById('copy-btn');
            const originalText = copyBtn.innerHTML;
            
            copyBtn.innerHTML = '<i class="fas fa-check" aria-hidden="true"></i> <span>Copied!</span>';
            
            // Announce to screen readers
            const announcer = document.createElement('div');
            announcer.setAttribute('aria-live', 'assertive');
            announcer.classList.add('sr-only');
            announcer.textContent = 'Code copied to clipboard';
            document.body.appendChild(announcer);
            
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
                document.body.removeChild(announcer);
            }, 2000);
            
            e.clearSelection();
        });
        
        // Download functionality
        document.getElementById('download-btn').addEventListener('click', function() {
            const codeContent = document.getElementById('template-code').textContent;
            const blob = new Blob([codeContent], { type: 'text/yaml' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'simple-pipeline.yaml';
            document.body.appendChild(a);
            a.click();
            
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        });
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        
        // Check for saved theme preference or use the system preference
        const prefersDarkMode = window.matchMedia && 
                               window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (localStorage.getItem('theme') === 'dark' || 
           (!localStorage.getItem('theme') && prefersDarkMode)) {
            document.body.classList.add('dark-mode');
        }
        
        // Listen for changes in system color scheme
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                if (e.matches) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
        });
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            // Update button state for screen readers
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
                themeToggle.setAttribute('aria-label', 'Toggle light mode');
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.setAttribute('aria-label', 'Toggle dark mode');
            }
        });
        
        // Add CSS class for auto dark mode
        if (!localStorage.getItem('theme')) {
            document.documentElement.classList.add('auto-dark-mode');
        }
    </script>
    
    <!-- Hidden elements for screen readers -->
    <div class="sr-only" aria-live="polite" id="announcer"></div>
</body>
</html>
    