<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Documentation for Harness Templates - discover and use templates for pipelines, stages, and step groups">
    <title>Harness Templates Documentation</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <button class="theme-toggle" id="theme-toggle" title="Toggle dark/light mode" aria-label="Toggle dark mode">
        <i class="fas fa-moon dark-icon" aria-hidden="true"></i>
        <i class="fas fa-sun light-icon" aria-hidden="true"></i>
    </button>

    <div class="sidebar" role="navigation" aria-label="Main navigation">
        <div class="sidebar-header">
            <h3><i class="fas fa-layer-group" aria-hidden="true"></i> Harness Templates</h3>
        </div>
        <div class="sidebar-menu">
            <a href="index.html" class="active" aria-current="page"><i class="fas fa-home" aria-hidden="true"></i> All Templates</a>
            <a href="pipeline/"><i class="fas fa-sitemap" aria-hidden="true"></i> Pipelines</a>
            <a href="stage/"><i class="fas fa-cube" aria-hidden="true"></i> Stages</a>
            <a href="stepgroup/"><i class="fas fa-cubes" aria-hidden="true"></i> Step Groups</a>
        </div>
    </div>

    <div class="content">
        <header>
            <div class="template-header">
                <h1>Harness Templates Documentation</h1>
            </div>
            <div class="header-actions">
                <div class="search-container">
                    <label for="searchInput" class="sr-only">Search templates</label>
                    <input type="text" id="searchInput" placeholder="Search templates..." aria-label="Search templates">
                </div>
                <div class="filter-container" role="radiogroup" aria-label="Filter templates">
                    <button class="filter-btn active" data-filter="all" aria-pressed="true">All</button>
                    <button class="filter-btn" data-filter="pipeline" aria-pressed="false">Pipelines</button>
                    <button class="filter-btn" data-filter="stage" aria-pressed="false">Stages</button>
                    <button class="filter-btn" data-filter="stepgroup" aria-pressed="false">Step Groups</button>
                </div>
            </div>
        </header>
        
        <main>
            <div class="template-count">
                <i class="fas fa-list" aria-hidden="true"></i> <span id="visible-count">2</span> templates found
            </div>
            
            <div class="templates-grid">
                <div class="template-card" data-type="stage">
                    <div class="card-header">
                        <h2>Quickstart</h2>
                        <span class="template-badge type-stage">stage</span>
                    </div>
                    <p class="template-description">Harness stage template</p>
                    <div class="template-tags">
                        <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> kubernetes</span>
                        <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> deployment</span>
                    </div>
                    <a href="stage/Quickstart.html" class="view-btn">View Details</a>
                </div>
            
                <div class="template-card" data-type="pipeline">
                    <div class="card-header">
                        <h2>Simple Pipeline</h2>
                        <span class="template-badge type-pipeline">pipeline</span>
                    </div>
                    <p class="template-description">Harness pipeline template</p>
                    <div class="template-tags">
                        <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> cd</span>
                        <span class="tag"><i class="fas fa-tag" aria-hidden="true"></i> kubernetes</span>
                    </div>
                    <a href="pipeline/SimplePipeline.html" class="view-btn">View Details</a>
                </div>
            </div>
            
            <!-- Example template page content for demonstration -->
            <section class="template-section">
                <h2>Template Code Example</h2>
                <p>Below is an example of how template code can be embedded in the documentation:</p>
                
                <div class="template-code-section">
                    <div class="code-container">
                        <div class="code-header">
                            <div class="code-title">
                                <i class="fas fa-file-code" aria-hidden="true"></i> simple-pipeline.yaml
                            </div>
                            <div class="code-actions">
                                <button class="code-action-btn" id="copy-btn" data-clipboard-target="#template-code" aria-label="Copy code">
                                    <i class="fas fa-copy" aria-hidden="true"></i> <span>Copy</span>
                                </button>
                                <button class="code-action-btn" id="download-btn" aria-label="Download code">
                                    <i class="fas fa-download" aria-hidden="true"></i> <span>Download</span>
                                </button>
                            </div>
                        </div>
                        <div class="code-block">
                            <pre><code class="language-yaml" id="template-code">template:
  name: Simple CD Pipeline
  type: Pipeline
  versionLabel: "1.0.0"
  tags:
    type: cd
    platform: kubernetes
  description: A basic CD pipeline template for Kubernetes deployments
  spec:
    stages:
      - stage:
          name: Deploy
          identifier: Deploy
          type: Deployment
          spec:
            serviceConfig:
              serviceRef: <+input>
              serviceDefinition:
                type: Kubernetes
                spec:
                  variables:
                    - name: IMAGE_TAG
                      type: String
                      description: "Docker image tag to deploy"
                      required: true
            infrastructure:
              environment:
                name: <+input>
              infrastructureDefinition:
                type: KubernetesDirect
                spec:
                  namespace: <+input>
                  releaseName: <+input>
            execution:
              steps:
                - step:
                    name: Deploy to Kubernetes
                    identifier: k8sDeploy
                    type: K8sApply
                    timeout: 10m
                    spec:
                      skipDryRun: false
                      skipSteadyStateCheck: false</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>Generated on <span id="generation-date"></span> | <a href="https://harness.io" target="_blank" rel="noopener">Harness</a> Template Documentation</p>
        </footer>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/languages/yaml.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <script>
        // Set generation date
        document.getElementById('generation-date').textContent = new Date().toLocaleDateString('en-US', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
        
        // Initialize syntax highlighting
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
            updateTemplateCount();
        });
        
        // Copy to clipboard functionality
        const clipboard = new ClipboardJS('#copy-btn');
        
        clipboard.on('success', function(e) {
            const copyBtn = document.getElementById('copy-btn');
            const originalText = copyBtn.innerHTML;
            
            copyBtn.innerHTML = '<i class="fas fa-check" aria-hidden="true"></i> <span>Copied!</span>';
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
            }, 2000);
            
            e.clearSelection();
        });
        
        // Download functionality
        document.getElementById('download-btn').addEventListener('click', function() {
            const codeContent = document.getElementById('template-code').textContent;
            const blob = new Blob([codeContent], { type: 'text/yaml' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'simple-pipeline.yaml';
            document.body.appendChild(a);
            a.click();
            
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        });
        
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        
        // Check for saved theme preference or use the system preference
        const prefersDarkMode = window.matchMedia && 
                                window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && prefersDarkMode)) {
            document.body.classList.add('dark-mode');
        }
        
        // Listen for changes in system color scheme
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('theme')) {
                if (e.matches) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }
        });
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            // Update button state for screen readers
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
                themeToggle.setAttribute('aria-label', 'Toggle light mode');
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.setAttribute('aria-label', 'Toggle dark mode');
            }
        });
        
        // Template count functionality
        function updateTemplateCount() {
            const visibleTemplates = document.querySelectorAll('.template-card:not([style*="display: none"])');
            document.getElementById('visible-count').textContent = visibleTemplates.length;
        }
        
        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const templateCards = document.querySelectorAll('.template-card');
        
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            
            templateCards.forEach(card => {
                const name = card.querySelector('h2').textContent.toLowerCase();
                const description = card.querySelector('.template-description').textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase());
                
                if (name.includes(query) || description.includes(query) || tags.some(tag => tag.includes(query))) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
            
            updateTemplateCount();
        });
        
        // Filter functionality
        const filterButtons = document.querySelectorAll('.filter-btn');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                
                // Update ARIA states
                filterButtons.forEach(btn => {
                    btn.classList.remove('active');
                    btn.setAttribute('aria-pressed', 'false');
                });
                this.classList.add('active');
                this.setAttribute('aria-pressed', 'true');
                
                templateCards.forEach(card => {
                    if (filter === 'all' || card.getAttribute('data-type') === filter) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                updateTemplateCount();
            });
        });
        
        // Add CSS class for auto dark mode
        if (!localStorage.getItem('theme')) {
            document.documentElement.classList.add('auto-dark-mode');
        }
    </script>
    
    <!-- Hidden elements for screen readers -->
    <div class="sr-only" aria-live="polite" id="announcer"></div>
</body>
</html>
    